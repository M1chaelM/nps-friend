\begin{slide}[bm=,toc=]{Definition}
\begin{defn}{A.19}[Ben Ari]~\\
An \emph{n-ary relation} $\mathcal{R}$ is a subset of $S_1 \times \cdots \times
S_n$. 
\begin{itemize}
\item<2-> $\mathcal{R}$ is said to be a relation \emph{on} $S_1 \times \cdots \times
S_n$.
\item<3-> The value of $n$ is called the ``arity'' of the relation.
\item<4-> If all the sets $S_i$ are the same set $S$, $\mathcal{R}$ is said to be
an \emph{n-ary} relation on $S$.
\begin{itemize}
\item<5-> In this case $\mathcal{R}$ is called a \emph{homogenous} relation.
\end{itemize}
\item<6-> A 1-ary (unary) relation is simply a subset.
\end{itemize}
\end{defn}
\vspace{-3mm}
\pause[6]
\textbf{Notation:}~\\
Let $R$ be a relation on set $S$ that contains elements $x$ and $y$. 
The following statements are equivalent: 
\begin{itemize}
\item<8-> $x$ is related to $y$ under $R$
\item<8-> $xRy$
\item<8-> $(x,y) \in R$
\end{itemize}
\end{slide}

\begin{slide}[bm=,toc=]{Examples of Binary Relations}
\begin{ex}{}[Explicit]~\\
\begin{itemize}
\item<2-> Let $L = \{a,b,c\}$.
\item<3-> Let $W = \{all,ball,bat,cat\}$.
\item<4-> The we can define binary relation $R \subseteq L \times W$ such that 
      $R = \{(a,all),(b,ball),(b, bat), (c,cat)\}$.
\end{itemize}
\end{ex}
\pause[4]
\begin{ex}{}[Set Comprehension]~\\
\begin{itemize}
\item<6-> Let $\Sigma = \{a,b\}$.
\item<7-> Let $S = \Sigma^0 \cup \Sigma \cup \Sigma^2$
\item<8-> Define binary relation $R_{pre}$ on $S$ such that:
      $R_{pre} = \{(x,y)| y = xw \text{ for some } w \in S \}$.
\end{itemize}
\end{ex}

\end{slide}

\begin{slide}[bm=,toc=]{Matrix Representations of Relations}
Relations can be represented using a binary matrix. 

\begin{itemize}
\item<2-> If the tuple is in the relation, its value is set to $1$.
\item<3-> Otherwise it is $0$.
\end{itemize}
\pause[3]
\begin{ex}{}[$R$ and $R_{pre}$ from previous slide]
\[
\pause
R = 
\begin{blockarray}{cccc}
\begin{block}{cccc}
& a & b & c \\
\end{block}
\begin{block}{c[ccc]}
all  & 1 & 0 & 0 \bigstrut[t] \\
ball & 0 & 1 & 0 \\
bat  & 0 & 1 & 0 \\
cat  & 0 & 0 & 1 \\
\end{block}
\end{blockarray}
\pause
\qquad R_{pre} =
\begin{blockarray}{cccccccc}
\begin{block}{cccccccc}
 & \epsilon & a & b & aa & ab & ba & bb \\
\end{block}
\begin{block}{c[ccccccc]}
\epsilon & 1  & 1 & 1 & 1  & 1  & 1  & 1\bigstrut[t] \\
a  & 0& 1 & 0 & 1  & 1  & 0  & 0 \\
b  & 0& 0 & 1 & 0  & 0  & 1  & 1 \\
aa & 0& 0 & 0 & 1  & 0  & 0  & 0 \\
ab & 0& 0 & 0 & 0  & 1  & 0  & 0 \\
ba & 0& 0 & 0 & 0  & 0  & 1  & 0 \\
bb & 0& 0 & 0 & 0  & 0  & 0  & 1 \\
\end{block}
\end{blockarray}
\]
\end{ex}
\end{slide}

\begin{slide}[bm=,toc=]{DiGraph Representations of Relations}
Binary relations can be represented using a directed graph.
\begin{itemize}
\item<2-> Vertices represent elements.
\item<3-> Edges are placed between vertices if their corresponding tuple is in the relation.
\end{itemize}
\pause[3]
\begin{ex}{}[$R$ and $R_{pre}$ from above]
~\\
\vspace{-2mm}
\begin{figure}[h!]
\centering
\pause
\subcaptionbox*{$R$}[.3\linewidth]{
\begin{tikzpicture}
\tikzset{vertex/.style = {shape=circle,draw,minimum size=1.5em}}
\tikzset{edge/.style = {->,> = latex'}}

\node[vertex](c1) at (0,0.6) {$c$};
\node[vertex](b1) at (0,1.8) {$b$};
\node[vertex](a1) at (0,3) {$a$};
\node[vertex](d2) at (1.5,0) {$cat$};
\node[vertex](c2) at (1.5,1.2) {$bat$};
\node[vertex](b2) at (1.5,2.4) {$ball$};
\node[vertex](a2) at (1.5,3.6) {$all$};

\draw[edge] (a1) to (a2);
\draw[edge] (b1) to (b2);
\draw[edge] (b1) to (c2);
\draw[edge] (c1) to (d2);
\end{tikzpicture}
}
\pause
\subcaptionbox*{$R_{pre}$}[.5\linewidth]{
\begin{tikzpicture}
\tikzset{vertex/.style = {shape=circle,draw,minimum size=1.5em}}
\tikzset{edge/.style = {->,> = latex'}}

\node[vertex](aa) at (0.75,3) {$aa$};
\node[vertex](ab) at (2.25,3) {$ab$};
\node[vertex](a) at (0,1.5) {$a$};
\node[vertex](e) at (1.5,1.5) {$\epsilon$};
\node[vertex](b) at (3,1.5) {$b$};
\node[vertex](ba) at (0.75,0) {$ba$};
\node[vertex](bb) at (2.25,0) {$bb$};

\draw[edge] (a) to[loop below] (a);
\draw[edge] (b) to[loop above] (b);
\draw[edge] (e) to[loop left] (e);
\draw[edge] (aa) to[loop above] (aa);
\draw[edge] (ab) to[loop above] (ab);
\draw[edge] (ba) to[loop above] (ba);
\draw[edge] (bb) to[loop left] (bb);
\draw[edge] (e) to[bend left] (a);
\draw[edge] (e) to[bend left] (b);
\draw[edge] (e) to[bend left] (aa);
\draw[edge] (e) to[bend left] (ab);
\draw[edge] (e) to[bend left] (ba);
\draw[edge] (e) to[bend left] (bb);
\draw[edge] (a) to[bend left] (aa);
\draw[edge] (a) to (ab);
\draw[edge] (b) to (ba);
\draw[edge] (b) to[bend left] (bb);
\end{tikzpicture}
}
\end{figure}

\end{ex}
\end{slide}


\begin{slide}[bm=,toc=]{Reflexive Relations}
\begin{defn}{A.21}[Ben Ari]
Let $R$ be a binary relation on $S$.
\\~\\
$R$ is \emph{reflexive} if and only if $R(x,x)$ for all $x \in S$.
\end{defn}
~
\vspace{-12mm}
\pause 
\begin{figure}[t]
\caption*{\textbf{Example:} $R_{pre}$ is a reflexive relation on $S = \{\epsilon,a,b,aa,bb\}$} 
\pause 
\subcaptionbox*{As Matrix}{
$ \begin{blockarray}{cccccc}
 \begin{block}{cccccc}
  & \epsilon & a & b & aa & bb \\
 \end{block}
 \begin{block}{c[ccccc]}
 \epsilon & 1 & 1 & 1 & 1 & 1 \bigstrut[t] \\
 a        & 0 & 1 & 0 & 1 & 0  \\
 b        & 0 & 0 & 1 & 0 & 1  \\
 aa       & 0 & 0 & 0 & 1 & 0  \\
 bb       & 0 & 0 & 0 & 0 & 1  \\
 \end{block}
 \end{blockarray} $
}
\qquad
\subcaptionbox*{As Digraph}{
\pause 
\begin{tikzpicture}
\tikzset{vertex/.style = {shape=circle,draw,minimum size=1.5em}}
\tikzset{edge/.style = {->,> = latex'}}

\node[vertex](a) at (0.75,3) {$a$};
\node[vertex](b) at (2.25,3) {$b$};
\node[vertex](e) at (1.5,1.5) {$\epsilon$};
\node[vertex](aa) at (0.75,0) {$aa$};
\node[vertex](bb) at (2.25,0) {$bb$};

\draw[edge] (a) to[loop above] (a);
\draw[edge] (b) to[loop above] (b);
\draw[edge] (e) to[loop left] (e);
\draw[edge] (aa) to[loop above] (aa);
\draw[edge] (bb) to[loop left] (bb);
\draw[edge] (e) to[bend left] (a);
\draw[edge] (e) to[bend left] (b);
\draw[edge] (e) to[bend left] (aa);
\draw[edge] (e) to[bend left] (bb);
\draw[edge] (a) to[bend right] (aa);
\draw[edge] (b) to[bend left] (bb);
\end{tikzpicture}
}
\end{figure}

\end{slide}

\begin{slide}[bm=,toc=]{Symmetric Relations}
\begin{defn}{A.21}[Ben Ari]
Let $R$ be a binary relation on $S$.
\\~\\
$R$ is \emph{symmetric} if and only if $R(x_1,x_2)$ implies $R(x_2,x_1)$.
\end{defn}
~
\vspace{-12mm}
\pause \begin{figure}[t]
\caption*{\textbf{Example:} $R_l$ is a symmetric relation on $S = \{\epsilon,a,b,aa,bb\}$} 
\pause \subcaptionbox*{As Matrix}{
$ \begin{blockarray}{cccccc}
 \begin{block}{cccccc}
  & \epsilon & a & b & aa & bb \\
 \end{block}
 \begin{block}{c[ccccc]}
 \epsilon & 1 & 0 & 0 & 0 & 0 \bigstrut[t] \\
 a        & 0 & 1 & 1 & 0 & 0  \\
 b        & 0 & 1 & 1 & 0 & 0  \\
 aa       & 0 & 0 & 0 & 1 & 1  \\
 bb       & 0 & 0 & 0 & 1 & 1  \\
 \end{block}
 \end{blockarray} $
}
\qquad
\pause \subcaptionbox*{As Digraph}{
\begin{tikzpicture}
\tikzset{vertex/.style = {shape=circle,draw,minimum size=1.5em}}
\tikzset{edge/.style = {->,> = latex'}}

\node[vertex](a) at (0.75,3) {$a$};
\node[vertex](b) at (2.25,3) {$b$};
\node[vertex](e) at (1.5,1.5) {$\epsilon$};
\node[vertex](aa) at (0.75,0) {$aa$};
\node[vertex](bb) at (2.25,0) {$bb$};

\draw[edge] (a) to[loop above] (a);
\draw[edge] (b) to[loop above] (b);
\draw[edge] (e) to[loop above] (e);
\draw[edge] (aa) to[loop above] (aa);
\draw[edge] (bb) to[loop above] (bb);
\draw[edge] (a) to[bend left] (b);
\draw[edge] (b) to[bend left] (a);
\draw[edge] (bb) to[bend left] (aa);
\draw[edge] (aa) to[bend left] (bb);
\end{tikzpicture}
}
\end{figure}
\pause {\footnotesize Exercise: Give a rule for the relation.} 
\pause {\footnotesize \textbf{Ans:} $R_{l} = \{(x,y)| |x| = |y|\}$}
\end{slide}

\begin{slide}[bm=,toc=]{Antisymmetric Relations}
\begin{defn}{A.21}[Ben Ari]
Let $R$ be a binary relation on $S$.
\\~\\
$R$ is \emph{antisymmetric} if and only if $(x_1,x_2) \in R$ and $(x_2,x_1) \in
R$ implies $x_1 = x_2$.
\end{defn}
~
\vspace{-12mm}
\pause \begin{figure}[t]
\caption*{\textbf{Example:} $R_{pre}$ is also antisymmetric on $S = \{\epsilon,a,b,aa,bb\}$} 
\subcaptionbox*{As Matrix}{
\pause
$ \begin{blockarray}{cccccc}
 \begin{block}{cccccc}
  & \epsilon & a & b & aa & bb \\
 \end{block}
 \begin{block}{c[ccccc]}
 \epsilon & 1 & 1 & 1 & 1 & 1 \bigstrut[t] \\
 a        & 0 & 1 & 0 & 1 & 0  \\
 b        & 0 & 0 & 1 & 0 & 1  \\
 aa       & 0 & 0 & 0 & 1 & 0  \\
 bb       & 0 & 0 & 0 & 0 & 1  \\
 \end{block}
 \end{blockarray} $
}
\qquad
\subcaptionbox*{As Digraph}{
\pause
\begin{tikzpicture}
\tikzset{vertex/.style = {shape=circle,draw,minimum size=1.5em}}
\tikzset{edge/.style = {->,> = latex'}}

\node[vertex](a) at (0.75,3) {$a$};
\node[vertex](b) at (2.25,3) {$b$};
\node[vertex](e) at (1.5,1.5) {$\epsilon$};
\node[vertex](aa) at (0.75,0) {$aa$};
\node[vertex](bb) at (2.25,0) {$bb$};

\draw[edge] (a) to[loop above] (a);
\draw[edge] (b) to[loop above] (b);
\draw[edge] (e) to[loop left] (e);
\draw[edge] (aa) to[loop above] (aa);
\draw[edge] (bb) to[loop left] (bb);
\draw[edge] (e) to[bend left] (a);
\draw[edge] (e) to[bend left] (b);
\draw[edge] (e) to[bend left] (aa);
\draw[edge] (e) to[bend left] (bb);
\draw[edge] (a) to[bend right] (aa);
\draw[edge] (b) to[bend left] (bb);
\end{tikzpicture}
}
\end{figure}
\end{slide}

\begin{slide}[bm=,toc=]{Transitive Relations}
\begin{defn}{A.21}[Ben Ari]
Let $R$ be a binary relation on $S$.
\\~\\
$R$ is \emph{transitive} if and only if $R(x_1,x_2)$ and $R(x_2,x_3)$ implies $R(x_1,x_3)$.
\end{defn}
~
\vspace{-12mm}
\pause \begin{figure}[t]
\caption*{\textbf{Example:} Both $R_{pre}$ and $R_l$ are transitive on $S = \{\epsilon,a,b,aa,bb\}$} 
\subcaptionbox*{$R_{pre}$}{
\pause
\begin{tikzpicture}
\tikzset{vertex/.style = {shape=circle,draw,minimum size=1.5em}}
\tikzset{edge/.style = {->,> = latex'}}

\node[vertex](a) at (0.75,3) {$a$};
\node[vertex](b) at (2.25,3) {$b$};
\node[vertex](e) at (1.5,1.5) {$\epsilon$};
\node[vertex](aa) at (0.75,0) {$aa$};
\node[vertex](bb) at (2.25,0) {$bb$};

\draw[edge] (a) to[loop above] (a);
\draw[edge] (b) to[loop above] (b);
\draw[edge] (e) to[loop left] (e);
\draw[edge] (aa) to[loop above] (aa);
\draw[edge] (bb) to[loop left] (bb);
\draw[edge] (e) to[bend left] (a);
\draw[edge] (e) to[bend left] (b);
\draw[edge] (e) to[bend left] (aa);
\draw[edge] (e) to[bend left] (bb);
\draw[edge] (a) to[bend right] (aa);
\draw[edge] (b) to[bend left] (bb);
\end{tikzpicture}
}
\qquad
\subcaptionbox*{$R_l$}{
\pause
\begin{tikzpicture}
\tikzset{vertex/.style = {shape=circle,draw,minimum size=1.5em}}
\tikzset{edge/.style = {->,> = latex'}}

\node[vertex](a) at (0.75,3) {$a$};
\node[vertex](b) at (2.25,3) {$b$};
\node[vertex](e) at (1.5,1.5) {$\epsilon$};
\node[vertex](aa) at (0.75,0) {$aa$};
\node[vertex](bb) at (2.25,0) {$bb$};

\draw[edge] (a) to[loop above] (a);
\draw[edge] (b) to[loop above] (b);
\draw[edge] (e) to[loop above] (e);
\draw[edge] (aa) to[loop above] (aa);
\draw[edge] (bb) to[loop above] (bb);
\draw[edge] (a) to[bend left] (b);
\draw[edge] (b) to[bend left] (a);
\draw[edge] (bb) to[bend left] (aa);
\draw[edge] (aa) to[bend left] (bb);
\end{tikzpicture}
}
\end{figure}
\end{slide}
\begin{slide}[bm=,toc=]{Equivalence Relations}
\begin{defn}{--- Equivalence Relations}~\\
A relation is an equivalence relation if it is:

\begin{itemize}
\item<2-> Reflexive
\item<3-> Symmetric
\item<4-> Transitive
\end{itemize}
\end{defn}
\pause[4]
\textbf{Examples}:
\begin{itemize}
\item<6-> $\{(x,y) | x = y \}$
\item<7-> $\{(x,y) | x \text{ and } y \text{ begin with the same character}\}$
\item<8-> $\{(x,y) | x \text{ and } y \text{ contain the same substring}\}$
\item<9-> $R_{l}$ 
\end{itemize}
\end{slide}

\begin{slide}[bm=,toc=]{Equivalence Classes}
\begin{defn}{--- Equivalence Classes}~\\
Let $E$ be an equivalence relation on a set $S$. 
~\\
\pause
For any element $x \in S$:
\begin{itemize}
\item<3-> We define the \emph{equivalence class} of $x$ as the set of elements in
      $S$ that are related to $x$ under relation $E$.
\item<4-> The equivalence class of $x$ is denoted $[x]_{E}$ (or simply $[x]$ if
      the relation is clear from context).
\item<5-> In symbols, $[x] = \{y \in S| (x,y) \in E\}$
\end{itemize}
\end{defn}
~\\
\pause[4]
\begin{thm}{ -- $S$ is the union of its equivalence classes}~\\
\pause
Let $E$ be an equivalence relation on a set $S$. Then
\pause
\[
  \bigcup_{x \in X} [x]_E = S
  \]
\end{thm}
\pause
This follows from the fact that $E$ is reflexive.
\end{slide}

\begin{slide}[bm=,toc=]{Equivalence Classes Partition a Set}
\begin{thm}{ -- Equivalence classes are equal or disjoint}~\\
\pause
The following are equivalent:
\begin{itemize}
\item<3-> $xEy$ 
\item<4-> $[x] = [y]$ 
\item<5-> $[x] \cap [y] \neq \emptyset$ 
\end{itemize}
\pause[4]
Consquently, if $x$ and $y$ are not related by $E$, then:
\item<7->$[x] \neq [y]$, and
\item<8->$[x] \cap [y] = \emptyset$.
\end{thm}
\pause[3]
Colloquially, equivalence classes cannot partially overlap. 
\pause
\vspace{5mm}
\begin{thm}{ -- Equivalence classes partition a set}~\\
\pause
This follows directly from two preceding theorems. 
\end{thm}
\end{slide}

\begin{slide}[bm=,toc=]{Partial Orders}
\begin{defn}{--- Partial Orders}~\\
\pause
A relation is a partial order if it is:

\begin{itemize}
\item<3-> Reflexive
\item<4-> Antisymmetric
\item<5-> Transitive
\end{itemize}
\end{defn}
\pause[4]
\textbf{Examples}:
\begin{itemize}
\item<7-> $R_{pre}$
\item<8-> $\{(x,y) | x \text{ is a substring of } y \}$
\item<9-> $\{(x,y) | x \text{ is a subset of } y \}$
\item<10-> $\{(x,y) | y \text{ is a suffix of } x \}$
\end{itemize}
\end{slide}
\begin{slide}[bm=,toc=]{Combining Relations}
Recall that relations are sets.
\\~\\
\pause
\textbf{Consequently:}~\\
\begin{itemize}
\item<3-> Relations can be combined using set operations.
\item<4-> That is, given arbitrary relations $R_1$ and $R_2$, we can form:
\begin{itemize}
\item<5-> $R_1 \cup R_2$
\item<6-> $R_1 \cap R_2$
\item<7-> $R_1 - R_2$
\item<8-> $R_2 - R_1$
\end{itemize}
\item<9-> Note that we generally expect $R_1$ and $R_2$ to have the same arity.
\end{itemize}
\end{slide}

\begin{slide}[bm=,toc=]{Composition of Binary Relations}
We can also combine binary relations using the \emph{composition} operation, denoted
$R_1 \circ R_2$.
\begin{itemize}
\item<2-> Assume $R_2$ is a relation on $S_1 \times S_2$ and $R_1$ is a relation on
$S_3 \times S_4$.
\item<3-> Let $S = S_2 \cap S_3$.
\item<4-> The composition forms a new relation on $S_1 \times S_4$, such that:
\begin{itemize}
\item<5-> $(x,z) \in R_1 \circ R_2$ if and only if there exists $y$ in $S$ such
that $(y,z) \in R_1$ and $(x,y) \in R_2$.
\end{itemize}
\item<6-> Note that in the case where $S = \emptyset$, $R_1 \circ R_2$ is also empty.
\end{itemize}

\vspace{-5mm}
\begin{figure}[b]
\begin{subfigure}{.4\linewidth}
\pause[6]
\begin{tikzpicture}[scale=.75, every node/.style={scale=.75}]
\tikzset{vertex/.style = {shape=circle,draw,minimum size=1.5em}}
\tikzset{edge/.style = {->,> = latex'}}

\draw (0, 1.2) ellipse (.75cm and 2cm);
\node[vertex](c) at (0,0.4) {$c$};
\node[vertex](b) at (0,1.2) {$b$};
\node[vertex](a) at (0,2) {$a$};
\node (s1) at (0, 2.9) {$S_1$};

\node (r2) at (1, -0.2) {$R_2$};

\draw (2, 1.2) ellipse (.75cm and 2cm);
\node[vertex](z) at (2,0) {$z$};
\node[vertex](y) at (2,0.8) {$y$};
\node[vertex](x) at (2,1.6) {$x$};
\node[vertex](w) at (2,2.4) {$w$};
\node (s) at (2, 3) {$S$};

\node (r1) at (3, -0.2) {$R_1$};

\draw (4, 1.2) ellipse (.75cm and 2cm);
\node[vertex](t) at (4,0.4) {$t$};
\node[vertex](s) at (4,1.2) {$s$};
\node[vertex](r) at (4,2) {$r$};
\node (s4) at (4, 2.9) {$S_4$};



\draw[edge] (a) to (x);
\draw[edge] (b) to (z);
\draw[edge] (c) to (w);
\draw[edge] (c) to (z);

\draw[edge] (w) to (r);
\draw[edge] (w) to (s);
\draw[edge] (z) to (t);
\draw[edge] (y) to (r);

\end{tikzpicture}

\end{subfigure}
\begin{subfigure}{.5\linewidth}
\pause
\begin{align*}
  =& R_1 \circ R_2 \\
  =& \{(b,t),(c,r),(c,s),(c,t)\}
\end{align*}
\end{subfigure}
\end{figure}

\end{slide}
\begin{slide}[bm=,toc=]{Powers of Binary Relations}
\begin{defn}{-- Powers of Relations}
~\\
\pause
Let $R$ be a binary homogenous relation on $S$.
\\~\\
\pause
The relation $R^n$ is defined inductively by: 
\begin{itemize}
\item<4-> $R^1 = R$
\item<5-> $R^{n+1} = R^n \circ R$
\end{itemize}
\end{defn}
\pause[3]
\textbf{Notes:}
\begin{itemize}
\item<7-> This definition makes use of the concept of relation composition
given on the previous slide.
\item<8->Useful for defining paths of length $n$.
\item<9->We will see it again in modal logic.
\end{itemize}
\end{slide}

